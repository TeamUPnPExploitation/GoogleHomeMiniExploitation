import urllib.request
import urllib.parse

# Building SOAP request
d = dict(parameter1="value1", parameter2="value2")
soap_encoding = "http://schemas.xmlsoap.org/soap/encoding/"
soap_env = "http://schemas.xmlsoap.org/soap/envelope"
service_ns = "urn:schemas-upnp-org:service:WANCommonInterfaceConfig:1"
soap_body = """





""".format(soap_encoding, service_ns, soap_env)

# Which information I want to receive
soap_action = "urn:schemas-upnp-org:service:WANCommonInterfaceConfig:1#GetTotalPacketsReceived"
headers = {
	'SOAPAction': u'"%s"' % (soap_action),
	'Host': u'192.168.178.1:5000',
	'Content-Type': 'text/xml',
	'Content-Length': len(soap_body), 
}

# The control URL
ctrl_url = "http://192.168.178.1:5000/ctl/CmnIfCfg"

# Output action calling
data = urllib.parse.urlencode(d).encode("utf-8")
request = urllib.request.Request(ctrl_url, soap_body, headers)
with urllib.request.urlopen(request, data=data) as f:
	response = f.read()
	print(response)

